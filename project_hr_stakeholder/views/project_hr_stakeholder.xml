<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <!-- Project stakeholders -->

        <record id="project_hr_stakeholder_edit" model="ir.ui.view">
            <field name="name">project.hr.stakeholder.form</field>
            <field name="model">project.hr.stakeholder</field>
            <field name="arch" type="xml">
                <form string="Stakeholders">
		    <sheet>
			<group>
	                    <field name="project_id"/>
	                    <field name="partnerd_id"/>
			</group>
			<group string="Roles and responsibilities">
	                    <field name="role_ids" widget="many2many_tags"/>
	                    <field name="responsibility_ids" widget="many2many_tags" />
			</group>
			<group >
	                    <field name="influence"/>
			</group>
		    </sheet>
                </form>
            </field>
        </record>

        <record id="project_hr_stakeholder_tree" model="ir.ui.view">
            <field name="name">project.hr.stakeholder.tree</field>
            <field name="model">project.hr.stakeholder</field>
            <field name="arch" type="xml">
                <tree string="Stakeholders">
                    <field name="project_id"/>
                    <field name="partnerd_id"/>
                    <field name="name"/>
                    <field name="role_ids" widget="many2many_tags"/>
		    <field name="responsibility_ids" widget="many2many_tags"/>
		    <field name="influence"/>
                </tree>
            </field>
        </record>

        <record id="project_hr_stakeholder_tree_2" model="ir.ui.view">
            <field name="name">project.hr.stakeholder.tree</field>
            <field name="model">project.hr.stakeholder</field>
            <field name="arch" type="xml">
                <tree string="Stakeholders">
                    <field name="project_id"/>
                    <field name="partnerd_id"/>
                    <field name="name"/>
                    <field name="role_ids" widget="many2many_tags"/>
		    <field name="responsibility_ids" widget="many2many_tags"/>
		    <field name="influence"/>
                </tree>
            </field>
        </record>


        <record id="view_project_hr_stakeholder_search" model="ir.ui.view">
            <field name="name">project.hr.stakeholder.search</field>
            <field name="model">project.hr.stakeholder</field>
            <field name="arch" type="xml">
                <search string="Search Stakeholders">
		    <field name="partnerd_id"/>
		    <field name="project_id"/>
                    <field name="role_ids" />
		    <field name="responsibility_ids" />
		    <field name="influence"/>
		    <group expand="1" string="Group by">
			<filter string="Project" name="Project" context="{'group_by': 'project_id'}"/>
			<filter string="Partner" name="Partner" context="{'group_by': 'partnerd_id'}"/>
		    </group>
                </search>
            </field>
        </record>

        <record id="action_project_hr_stakeholder_tree" model="ir.actions.act_window">
            <field name="name">Project Stakeholders</field>
            <field name="res_model">project.hr.stakeholder</field>
            <field name="view_id" ref="project_hr_stakeholder_tree_2"/>
            <field name="view_mode">tree,form</field>
            <field name="help">Define the responsibilities for stakeholders in projects.</field>
        </record>

        <menuitem id="project_hr_stakeholder_menu"
		  name="Stakeholders"
		  parent="project.menu_project_config"
		  sequence="2"
		  groups="project.group_project_manager" />

        <menuitem action="action_project_hr_stakeholder_tree"
        	  id="menu_project_hr_stakeholder_view"
        	  parent="project_hr_stakeholder_menu"
        	  sequence="10"/>

</odoo>
